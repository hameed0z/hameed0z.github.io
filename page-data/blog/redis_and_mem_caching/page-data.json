{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/redis_and_mem_caching","result":{"data":{"markdownRemark":{"html":"<p>Through my journey in the development industry, I have been discovering more and more.\ntried to develop and enhance my skills in front-end, backend, and even cross-platform mobile development</p>\n<p>though I felt I can see the bigger picture and I did, I decided to put more time to invest in my backend skills.</p>\n<p>so this is my first article about the tech and skills I miss as a back-end developer.</p>\n<h4>Server Side Mem-Caching</h4>\n<p>Server-side caching is the technique used to cache commonly used data on a server to decrease the hits on the DB whenever the data is needed but there are another use cases we will discuss in this article</p>\n<h4>Use cases</h4>\n<h5>Decreasing response time</h5>\n<p>As data is cached in server memory this allows the server to have a better data retrieval performance and this should lead to faster response time.</p>\n<h5>Avoiding repeated computation</h5>\n<p>As if we working on a dashboard that shows the total revenue in the previous month. with large data, this is an expensive computation so we can do it once and caching it.</p>\n<h5>Reducing DB hits</h5>\n<p>As mentioned above we can reduce DB hits if we cached frequently required data, so simple can't explain more.</p>\n<h4>When NOT to use</h4>\n<ol>\n<li>As you can see if the required data is missing we will have to hit the database and caching it and this may lead to increasing the response.</li>\n<li>Caching so much data will also lead to bad performance.</li>\n<li>If cached data are frequently modified this can lead to inconsistency\nbecause you will need to recache data every time you update this data in the database\nother problem is synchronization in case of distributed systems probably you will have outdated cache in a place or other. </li>\n</ol>\n<h4>Caching Techniques</h4>\n<h5>Write-through</h5>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6f8806eda828c94fbb802d390dcc6879/27b7a/writethrough.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.43283582089552%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABDUlEQVQoz41RS07DMBTMDdnDvjfgFGxYcQCExD1ggQSrLioUpEZpCg1S7bQ1SRznN3ScpOCQBZZGeXae582MvaZpMEZd1xivqb4peD8kLlm82cD33xAslwjDFdq2/T8hm7n4HeqqNEjTFEopCCGgtbbDxk4mCYuiQJZlyPMcxhgsXn08PL0g10V38YiqqmyPMSXGrhxCKlKHA7Zbgc84RpIkuLq+wdnFDEEYWbUcRJCQqvVRQNs29PSXkOqIsixP+bEmwRADbUshIaXEfre359F6jdu7e7x/xHY/2PdokRtaOuXS5zg0Oa/d/wtXEc5nl1j4QZd5Vbuv7IbtBs76N6iath+f51BfWTe87/0GDIFsFeu0lr0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Write through\"\n        title=\"Write through\"\n        src=\"/static/6f8806eda828c94fbb802d390dcc6879/fcda8/writethrough.png\"\n        srcset=\"/static/6f8806eda828c94fbb802d390dcc6879/12f09/writethrough.png 148w,\n/static/6f8806eda828c94fbb802d390dcc6879/e4a3f/writethrough.png 295w,\n/static/6f8806eda828c94fbb802d390dcc6879/fcda8/writethrough.png 590w,\n/static/6f8806eda828c94fbb802d390dcc6879/27b7a/writethrough.png 804w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\nUsing this technique we first apply changes to cache and after then we apply those changes to the database.</p>\n<h5>Write-through cons</h5>\n<p>In a scenario when you have multiple caches on many multiple servers you will have outdated data stored in one of your cache stores.</p>\n<h5>Write-back</h5>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f3966459612d308c28b78a7b6311bcbe/77800/writeback.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.54385964912281%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABA0lEQVQoz5VRTUvDQBDNT+3VS6FHj+KlV4899uxfsHgXwYsXKf0QTOhuttSaZJP9yjMzoTG0EXRgWJiZ9+a92SiEgPP03qMfQzO/ZTREVtc1Pg8HCCGg0hTOua73b8LgA6sq8hxJkiCOY1SV4R4t+jOh9z/F5WqD94+EiZ3zMMY0pBXKsoS1tlPbxwwqbAkcRlcTjK9vmYCITmSplMiyjJW2cak4omGtNQO0bhVIBuYMoZ4UEkop7NUeRVEw8GHxiKfnF57p3zYiO1Swtj381/HYABXEbtd8imR1tMQ0SS8troPHzfQOs/l952rQMlmh5skmEfQ/gnpUo3h9W2O5jS8UfgNOSWylTRIXsQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Write back\"\n        title=\"Write back\"\n        src=\"/static/f3966459612d308c28b78a7b6311bcbe/fcda8/writeback.png\"\n        srcset=\"/static/f3966459612d308c28b78a7b6311bcbe/12f09/writeback.png 148w,\n/static/f3966459612d308c28b78a7b6311bcbe/e4a3f/writeback.png 295w,\n/static/f3966459612d308c28b78a7b6311bcbe/fcda8/writeback.png 590w,\n/static/f3966459612d308c28b78a7b6311bcbe/77800/writeback.png 855w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Using this technique we apply changes to the database first and then either update cache or delete the entry so whenever the data is needed you will hit the cache and if it's missing we will request a new fresh data from the database.</p>\n<h5>Write-back cons</h5>\n<p>Sending requests from a database to update your cache could be expensive and may lead to bad performance.</p>\n<h5>Hyperd Technique</h5>\n<p>We can use both write back and write through techniques based on the importance of data.\nwe can ignore updating data in the cache with a write-back technique if this data is not important as of comments, likes or something similar. </p>\n<h4>Introducing Redis</h4>\n<p>As mentioned on the official page: <a href=\"https://redis.io/\" target=\"_blank\">Redis official page</a></p>\n<p>Redis is an open source (BSD licensed), in-memory data structure store, used as a database, cache and message broker.</p>\n<h5>Example</h5>\n<p>this example will be written using nodejs so it's better to be familiar with js\nstart by <a href=\"https://redis.io/download\" target=\"_blank\">downloading Redis</a>, it's available for all operating systems</p>\n<p>create a folder and navigate to it and then open your cmd or terminal and type </p>\n<pre class=\"light-default-light vscode-highlight\" data-language=\"bash\"><code class=\"vscode-highlight-code\"><span class=\"vscode-highlight-line\"><span class=\"mtk1\">npm init</span></span></code></pre>\n<p>this will walk you through creating a package.json file\nafter then we need to install some packages</p>\n<ol>\n<li>expressjs - a minimalist web framework for Node.js</li>\n<li>Redis - seriously it's our topic</li>\n</ol>\n<pre class=\"light-default-light vscode-highlight\" data-language=\"bash\"><code class=\"vscode-highlight-code\"><span class=\"vscode-highlight-line\"><span class=\"mtk1\">npm i express redis</span></span></code></pre>\n<p>then creating an app.js file</p>\n<p>first, we start by importing dependencies and creating our web server</p>\n<pre class=\"light-default-light vscode-highlight\" data-language=\"js\"><code class=\"vscode-highlight-code\"><span class=\"vscode-highlight-line\"><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">express</span><span class=\"mtk1\"> = </span><span class=\"mtk10\">require</span><span class=\"mtk1\">(</span><span class=\"mtk17\">&#39;express&#39;</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\"></span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk3\">// Set Port</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">port</span><span class=\"mtk1\"> = </span><span class=\"mtk7\">3000</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\"></span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk3\">// Init app</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">app</span><span class=\"mtk1\"> = </span><span class=\"mtk10\">express</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\"></span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk12\">app</span><span class=\"mtk1\">.</span><span class=\"mtk10\">listen</span><span class=\"mtk1\">(</span><span class=\"mtk12\">port</span><span class=\"mtk1\">, </span><span class=\"mtk4\">function</span><span class=\"mtk1\">(){</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk9\">console</span><span class=\"mtk1\">.</span><span class=\"mtk10\">log</span><span class=\"mtk1\">(</span><span class=\"mtk17\">&#39;Server started on port &#39;</span><span class=\"mtk1\">+</span><span class=\"mtk12\">port</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">});</span></span></code></pre>\n<p>second, we establish a connection with redis</p>\n<pre class=\"light-default-light vscode-highlight\" data-language=\"js\"><code class=\"vscode-highlight-code\"><span class=\"vscode-highlight-line\"><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">redis</span><span class=\"mtk1\"> = </span><span class=\"mtk10\">require</span><span class=\"mtk1\">(</span><span class=\"mtk17\">&#39;redis&#39;</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\"></span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk3\">// Create Redis Client</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk4\">let</span><span class=\"mtk1\"> </span><span class=\"mtk12\">client</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">redis</span><span class=\"mtk1\">.</span><span class=\"mtk10\">createClient</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\"></span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk3\">//lestinig to redis connection</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk12\">client</span><span class=\"mtk1\">.</span><span class=\"mtk10\">on</span><span class=\"mtk1\">(</span><span class=\"mtk17\">&#39;connect&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk4\">function</span><span class=\"mtk1\">(){</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk9\">console</span><span class=\"mtk1\">.</span><span class=\"mtk10\">log</span><span class=\"mtk1\">(</span><span class=\"mtk17\">&#39;Connected to Redis...&#39;</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">});</span></span></code></pre>\n<p>third, we add our endpoints and we get our final result</p>\n<pre class=\"light-default-light vscode-highlight\" data-language=\"javascript\"><code class=\"vscode-highlight-code\"><span class=\"vscode-highlight-line\"><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">express</span><span class=\"mtk1\"> = </span><span class=\"mtk10\">require</span><span class=\"mtk1\">(</span><span class=\"mtk17\">&#39;express&#39;</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">redis</span><span class=\"mtk1\"> = </span><span class=\"mtk10\">require</span><span class=\"mtk1\">(</span><span class=\"mtk17\">&#39;redis&#39;</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\"></span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk3\">// Create Redis Client</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk4\">let</span><span class=\"mtk1\"> </span><span class=\"mtk12\">client</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">redis</span><span class=\"mtk1\">.</span><span class=\"mtk10\">createClient</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\"></span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk12\">client</span><span class=\"mtk1\">.</span><span class=\"mtk10\">on</span><span class=\"mtk1\">(</span><span class=\"mtk17\">&#39;connect&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk4\">function</span><span class=\"mtk1\">(){</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk9\">console</span><span class=\"mtk1\">.</span><span class=\"mtk10\">log</span><span class=\"mtk1\">(</span><span class=\"mtk17\">&#39;Connected to Redis...&#39;</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">});</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\"></span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk3\">// Set Port</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">port</span><span class=\"mtk1\"> = </span><span class=\"mtk7\">3000</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\"></span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk3\">// Init app</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">app</span><span class=\"mtk1\"> = </span><span class=\"mtk10\">express</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\"></span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk10\">getBook</span><span class=\"mtk1\"> = </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">name</span><span class=\"mtk1\">) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk12\">client</span><span class=\"mtk1\">.</span><span class=\"mtk10\">hgetall</span><span class=\"mtk1\">(</span><span class=\"mtk12\">name</span><span class=\"mtk1\">, </span><span class=\"mtk4\">function</span><span class=\"mtk1\">(</span><span class=\"mtk12\">err</span><span class=\"mtk1\">, </span><span class=\"mtk12\">obj</span><span class=\"mtk1\">){</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk14\">if</span><span class=\"mtk1\">(!</span><span class=\"mtk12\">err</span><span class=\"mtk1\">) </span><span class=\"mtk14\">return</span><span class=\"mtk1\"> </span><span class=\"mtk12\">obj</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk9\">console</span><span class=\"mtk1\">.</span><span class=\"mtk10\">log</span><span class=\"mtk1\">(</span><span class=\"mtk12\">err</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    });</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">}</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\"></span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk10\">addBook</span><span class=\"mtk1\"> = </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">name</span><span class=\"mtk1\">, {</span><span class=\"mtk12\">author</span><span class=\"mtk1\">, </span><span class=\"mtk12\">aspn</span><span class=\"mtk1\">}) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk12\">client</span><span class=\"mtk1\">.</span><span class=\"mtk10\">hmset</span><span class=\"mtk1\">(</span><span class=\"mtk12\">name</span><span class=\"mtk1\">, [</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk17\">&#39;author&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk12\">author</span><span class=\"mtk1\">,</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk17\">&#39;aspn&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk12\">aspn</span><span class=\"mtk1\">,</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk17\">&#39;name&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk12\">name</span><span class=\"mtk1\">,</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    ], </span><span class=\"mtk4\">function</span><span class=\"mtk1\">(</span><span class=\"mtk12\">err</span><span class=\"mtk1\">, </span><span class=\"mtk12\">book</span><span class=\"mtk1\">){</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk14\">if</span><span class=\"mtk1\">(</span><span class=\"mtk12\">err</span><span class=\"mtk1\">){</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            </span><span class=\"mtk9\">console</span><span class=\"mtk1\">.</span><span class=\"mtk10\">log</span><span class=\"mtk1\">(</span><span class=\"mtk12\">err</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk9\">console</span><span class=\"mtk1\">.</span><span class=\"mtk10\">log</span><span class=\"mtk1\">(</span><span class=\"mtk12\">book</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk12\">res</span><span class=\"mtk1\">.</span><span class=\"mtk10\">json</span><span class=\"mtk1\">({</span><span class=\"mtk12\">message:</span><span class=\"mtk1\"> </span><span class=\"mtk17\">&#39;success&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk12\">book:book</span><span class=\"mtk1\">});</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    });</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">}</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\"></span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk3\">// Search for book end point</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk12\">app</span><span class=\"mtk1\">.</span><span class=\"mtk10\">post</span><span class=\"mtk1\">(</span><span class=\"mtk17\">&#39;/search&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk4\">function</span><span class=\"mtk1\">(</span><span class=\"mtk12\">req</span><span class=\"mtk1\">, </span><span class=\"mtk12\">res</span><span class=\"mtk1\">, </span><span class=\"mtk12\">next</span><span class=\"mtk1\">){</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">let</span><span class=\"mtk1\"> </span><span class=\"mtk12\">name</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">req</span><span class=\"mtk1\">.</span><span class=\"mtk12\">body</span><span class=\"mtk1\">.</span><span class=\"mtk12\">name</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">let</span><span class=\"mtk1\"> </span><span class=\"mtk12\">book</span><span class=\"mtk1\"> = </span><span class=\"mtk10\">getBook</span><span class=\"mtk1\">(</span><span class=\"mtk12\">name</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">     </span><span class=\"mtk14\">if</span><span class=\"mtk1\">(</span><span class=\"mtk12\">book</span><span class=\"mtk1\">) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk12\">res</span><span class=\"mtk1\">.</span><span class=\"mtk10\">json</span><span class=\"mtk1\">({</span><span class=\"mtk12\">message:</span><span class=\"mtk1\"> </span><span class=\"mtk17\">&#39;success&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk12\">book:book</span><span class=\"mtk1\">});</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    } </span><span class=\"mtk14\">else</span><span class=\"mtk1\"> {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk3\">// this is the place where we hit database</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk3\">// and search for the book </span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk3\">// if found we add it to the cache</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk3\">// addBook(name, {author, aspn});</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">});</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\"></span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk3\">// Add Book end point</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk12\">app</span><span class=\"mtk1\">.</span><span class=\"mtk10\">post</span><span class=\"mtk1\">(</span><span class=\"mtk17\">&#39;/add&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk4\">function</span><span class=\"mtk1\">(</span><span class=\"mtk12\">req</span><span class=\"mtk1\">, </span><span class=\"mtk12\">res</span><span class=\"mtk1\">, </span><span class=\"mtk12\">next</span><span class=\"mtk1\">){</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">let</span><span class=\"mtk1\"> </span><span class=\"mtk12\">name</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">req</span><span class=\"mtk1\">.</span><span class=\"mtk12\">body</span><span class=\"mtk1\">.</span><span class=\"mtk12\">name</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk10\">addBook</span><span class=\"mtk1\">(</span><span class=\"mtk12\">name</span><span class=\"mtk1\">, </span><span class=\"mtk12\">req</span><span class=\"mtk1\">.</span><span class=\"mtk12\">body</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk3\">// Note we should also add the book to DB</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\"></span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">});</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\"></span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk3\">// Delete Book end point</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk12\">app</span><span class=\"mtk1\">.</span><span class=\"mtk10\">delete</span><span class=\"mtk1\">(</span><span class=\"mtk17\">&#39;/delete/:aspn&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk4\">function</span><span class=\"mtk1\">(</span><span class=\"mtk12\">req</span><span class=\"mtk1\">, </span><span class=\"mtk12\">res</span><span class=\"mtk1\">, </span><span class=\"mtk12\">next</span><span class=\"mtk1\">){</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk12\">client</span><span class=\"mtk1\">.</span><span class=\"mtk10\">del</span><span class=\"mtk1\">(</span><span class=\"mtk12\">req</span><span class=\"mtk1\">.</span><span class=\"mtk12\">params</span><span class=\"mtk1\">.</span><span class=\"mtk12\">aspn</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk3\">// Note we should also delete the book from DB</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk12\">res</span><span class=\"mtk1\">.</span><span class=\"mtk10\">json</span><span class=\"mtk1\">({</span><span class=\"mtk12\">message:</span><span class=\"mtk1\"> </span><span class=\"mtk17\">&#39;success&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk12\">book:book</span><span class=\"mtk1\">});</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">});</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\"></span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk12\">app</span><span class=\"mtk1\">.</span><span class=\"mtk10\">listen</span><span class=\"mtk1\">(</span><span class=\"mtk12\">port</span><span class=\"mtk1\">, </span><span class=\"mtk4\">function</span><span class=\"mtk1\">(){</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk9\">console</span><span class=\"mtk1\">.</span><span class=\"mtk10\">log</span><span class=\"mtk1\">(</span><span class=\"mtk17\">&#39;Server started on port &#39;</span><span class=\"mtk1\">+</span><span class=\"mtk12\">port</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">});</span></span></code></pre>\n<p>Let me know  what you think about Redis and let me know if you need a more advanced tutorial</p>\n<style class=\"vscode-highlight-styles\">\n  :root {\n  --vscode-highlight-padding-v: 1rem;\n  --vscode-highlight-padding-h: 1.5rem;\n  --vscode-highlight-padding-top: var(--vscode-highlight-padding-v);\n  --vscode-highlight-padding-right: var(--vscode-highlight-padding-h);\n  --vscode-highlight-padding-bottom: var(--vscode-highlight-padding-v);\n  --vscode-highlight-padding-left: var(--vscode-highlight-padding-h);\n  --vscode-highlight-border-radius: 8px;\n\n  --vscode-highlight-line-highlighted-background-color: transparent;\n  --vscode-highlight-line-highlighted-border-width: 4px;\n  --vscode-highlight-line-highlighted-border-color: transparent;\n}\n\n.vscode-highlight {\n  overflow: auto;\n  -webkit-overflow-scrolling: touch;\n  padding-top: 1rem;\n  padding-top: var(--vscode-highlight-padding-top);\n  padding-bottom: 1rem;\n  padding-bottom: var(--vscode-highlight-padding-bottom);\n  border-radius: 8px;\n  border-radius: var(--vscode-highlight-border-radius);\n  font-feature-settings: normal;\n}\n\n.vscode-highlight-code {\n  display: inline-block;\n  min-width: 100%;\n}\n\n.vscode-highlight-line {\n  display: inline-block;\n  box-sizing: border-box;\n  width: 100%;\n  padding-left: 1.5rem;\n  padding-left: var(--vscode-highlight-padding-left);\n  padding-right: 1.5rem;\n  padding-right: var(--vscode-highlight-padding-right);\n}\n\n.vscode-highlight-line-highlighted {\n  background-color: var(--vscode-highlight-line-highlighted-background-color);\n  box-shadow: inset var(--vscode-highlight-line-highlighted-border-width) 0 0 0 var(--vscode-highlight-line-highlighted-border-color);\n}\n\n  .light-default-light {\nbackground-color: #FFFFFF;\ncolor: #000000;\n}\n\n.light-default-light .mtk1 { color: #000000; }\n.light-default-light .mtk2 { color: #FFFFFF; }\n.light-default-light .mtk3 { color: #008000; }\n.light-default-light .mtk4 { color: #0000FF; }\n.light-default-light .mtk5 { color: #811F3F; }\n.light-default-light .mtk6 { color: #FF0000; }\n.light-default-light .mtk7 { color: #09885A; }\n.light-default-light .mtk8 { color: #0451A5; }\n.light-default-light .mtk9 { color: #267F99; }\n.light-default-light .mtk10 { color: #795E26; }\n.light-default-light .mtk11 { color: #800000; }\n.light-default-light .mtk12 { color: #001080; }\n.light-default-light .mtk13 { color: #CD3131; }\n.light-default-light .mtk14 { color: #AF00DB; }\n.light-default-light .mtk15 { color: #D16969; }\n.light-default-light .mtk16 { color: #000080; }\n.light-default-light .mtk17 { color: #A31515; }\n.light-default-light .mtk18 { color: #000000FF; }\n.light-default-light .mtki { font-style: italic; }\n.light-default-light .mtkb { font-weight: bold; }\n.light-default-light .mtku { text-decoration: underline; text-underline-position: under; }\n</style>","frontmatter":{"path":"/blog/redis_and_mem_caching","title":"Redis as DB and mem-caching","author":"Hameed","date":"2019-06-09","tags":"redis,cahching"}}},"pageContext":{}},"staticQueryHashes":["1942870523","2605414244","3649515864","63159454"]}